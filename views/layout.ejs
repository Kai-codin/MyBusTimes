<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    let themeCSS = document.cookie.split('; ').find(row => row.startsWith('theme='))?.split('=')[1];

    if (!themeCSS) {
      themeCSS = 'Light.CSS';
    }
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.id = 'theme-stylesheet';
    link.href = `/css/themes/${themeCSS}`;
    document.head.appendChild(link);
  </script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9YD25VLKRT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-9YD25VLKRT');
  </script>
  <script> const featureToggles = <%- JSON.stringify(featureToggles) %>; </script>
  <script src="/js/theme-loader.js"></script>
  <script src="/js/ad-script.js"></script>

  <link rel="shortcut icon" href="https://kit.mybustimes.cc/MBT%20Logos/Favicon.png" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://kit.mybustimes.cc/MBT%20Logos/Favicon.png">
  <link rel="stylesheet" href="/css/style.css">

  <meta name="theme-color" content="#<%= brandColor %>">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title><%= title %> - My Bus Times</title>
</head>

<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PN8ZVKWT" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <header>
    <div class="site-header">
      <a href="/"><img id="logo" src="/src/icons/MBT-Logo-White.png" height="55px" alt="My Bus Times Logo"></a>
      <button id="menu-toggle"><img id="menu" src="/src/icons/Burger-Menu-White.png" height="35px" alt="Burger Menu Icon"></button>
      <form action="/search">
        <input type="search" name="q" id="q" placeholder="Search">
        <input type="submit" value="Search">
      </form>
      <div>
        <nav id="nav-menu">
          <ul>
            <li><a id="login-profile" href="/login">Login</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>
  <main>
    <div class="breadcrumb">
      <ol>
        <% breadcrumbs.forEach((item, index)=> { %>
        <li class="<%= item.className || 'default' %>">
          <% if (index===breadcrumbs.length - 1) { %>
          <a href="<%= item.url %>">
            <span><%= item.name %></span>
          </a>
          <% } else { %>
          <a href="<%= item.url %>">
            <span><%= item.name %></span>
          </a>
          <% } %>
        </li>
        <% }); %>
      </ol>
    </div>
    <hr>
    <div class="content">
      <%- body %>
    </div>
  </main>

  <footer>
    <hr>
    <ul class="footer-info">
      <li><a href="/rules">Rules & FAQ</a></li>•
      <li><a href="/policy">Privacy Policy</a></li>•
      <li><a href="/report">Bug Report</a></li>•
      <li><a href="/data">Data Source</a></li>
    </ul>
    <hr>
    <ul class="footer-info">
      <li><a href="https://www.youtube.com/@MyBusTimes">YouTube</a></li>•
      <li><a href="https://www.tiktok.com/@mybustimes">TikTok</a></li>•
      <li><a href="https://discord.gg/mybustimes">Discord</a></li>•
      <li><a href="https://www.tiktok.com/@mybustimes">Facebook</a></li>
    </ul>
    <hr>
    <ul class="footer-info">
      <li><a href="https://status.mybustimes.cc">Site Status</a></li>•
      <li><a href="/feature-toggles/status">Feature Status</a></li>
    </ul>
    <br><br>
    <a href="https://www.buymeacoffee.com/mybustimes">
      <img id="support-btn" />

    <script>
      const textColor = getComputedStyle(document.documentElement)
        .getPropertyValue('--text-color')
        .trim()
        .replace('#', '');
      const img = document.getElementById('support-btn');
      img.src = `https://img.buymeacoffee.com/button-api/?text=Help Support MBT &slug=mybustimes&button_colour=<%= brandColor %>&font_colour=${textColor}&font_family=Lato&outline_colour=000000&coffee_colour=FFDD00`;
    </script>
    </a>
    <br><br>
    <label for="theme-selector">Select Theme:</label>
    <select id="theme-selector">
    </select>
    <br>
    <div style="width: calc(90% - 4em);" class="ad-box"></div>
    <p>&copy; <%= new Date().getFullYear() %> My Bus Times. All rights reserved.</p>
  </footer>
</body>
<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="mybustimes" data-description="Support me on Buy me a coffee!" data-message="" data-color='#<%= brandColor %>' data-position="Right" data-x_margin="18" data-y_margin="18">
</script>

</html>