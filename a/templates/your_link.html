{% extends 'mbtbase.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/narrow.css' %}">
<style>
  .affiliate-box {
    margin: 20px 0;
    padding: 15px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--background-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .affiliate-link {
    font-family: monospace;
    font-size: 0.95rem;
    overflow-x: auto;
    margin-right: 10px;
    flex-grow: 1;
  }
  .copy-btn {
    padding: 6px 12px;
    border: none;
    border-radius: 6px;
    background: var(--brand-color);
    color: var(--text-color);
    cursor: pointer;
    transition: background 0.2s;
  }
  .copy-btn:hover {
    background: var(--brand-color);
  }
</style>
{% endblock %}

{% block content %}
<h1>Your Affiliate Link</h1>

<div class="affiliate-box">
  <span id="affiliate-link" class="affiliate-link">https://www.mybustimes.cc{{ user_link }}</span>
  <button class="copy-btn" onclick="copyAffiliateLink()">Copy</button>
</div>

<!--<p>Share this link with your friends to earn ad-free time.</p>
<p><strong>2 invites = 1 month ad-free</strong></p>
<p>
    Current clicks: {{ current_invites }}<br>
    Signups from your link: {{ signups }}<br>
</p>-->

<script>
function copyAffiliateLink() {
  const linkText = document.getElementById("affiliate-link").innerText;
  navigator.clipboard.writeText(linkText).then(() => {
    const btn = document.querySelector(".copy-btn");
    btn.innerText = "Copied!";
    setTimeout(() => btn.innerText = "Copy", 2000);
  }).catch(err => {
    alert("Failed to copy: " + err);
  });
}
</script>
{% endblock %}
